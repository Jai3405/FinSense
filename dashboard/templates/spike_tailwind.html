<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPIKE Terminal - Enterprise AI Trading Platform</title>

    <!-- Tailwind CSS (v3.4) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        background: '#050505',
                        surface: '#0A0A0A',
                        surfaceHighlight: '#121212',
                        border: '#1E1E1E',
                        primary: '#10B981',      /* Emerald 500 */
                        primaryGlow: 'rgba(16, 185, 129, 0.15)',
                        danger: '#EF4444',       /* Red 500 */
                        dangerGlow: 'rgba(239, 68, 68, 0.15)',
                        warning: '#F59E0B',      /* Amber 500 */
                        accent: '#3B82F6',       /* Blue 500 */
                        textMain: '#EDEDED',
                        textMuted: '#A1A1AA',
                        textDim: '#71717A',      /* Zinc 500 */
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'Menlo', 'monospace'],
                    },
                    boxShadow: {
                        'glow': '0 0 20px -5px var(--tw-shadow-color)',
                        'glass': '0 8px 32px 0 rgba(0, 0, 0, 0.37)',
                        'neon': '0 0 10px rgba(16, 185, 129, 0.4)',
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'shimmer': 'shimmer 2s linear infinite',
                    },
                    keyframes: {
                        shimmer: {
                            '0%': { backgroundPosition: '-1000px 0' },
                            '100%': { backgroundPosition: '1000px 0' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%2310B981' width='100' height='100'/><text y='70' x='50' text-anchor='middle' font-size='55' fill='%23050505' font-family='Inter' font-weight='900'>S</text></svg>">

    <style>
        body {
            background-color: #050505;
            background-image: 
                radial-gradient(circle at 50% 0%, #111827 0%, transparent 40%),
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 100% 100%, 40px 40px, 40px 40px;
            color: #EDEDED;
            overflow: hidden; /* App-like feel */
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #0A0A0A; 
        }
        ::-webkit-scrollbar-thumb {
            background: #27272A; 
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #3F3F46; 
        }

        /* Utility Classes for Glassmorphism */
        .glass-panel {
            background: rgba(10, 10, 10, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* Glow effects */
        .glow-text-green {
            text-shadow: 0 0 15px rgba(16, 185, 129, 0.6);
        }
        .glow-text-red {
            text-shadow: 0 0 15px rgba(239, 68, 68, 0.6);
        }

        /* Loader */
        .loader {
            border-top-color: #10B981;
            -webkit-animation: spinner 1.5s linear infinite;
            animation: spinner 1.5s linear infinite;
        }
        @keyframes spinner {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Dark mode inputs */
        input[type="date"] {
            color-scheme: dark;
        }

        /* Flip Card Styles */
        .flip-card {
            perspective: 1000px;
            cursor: pointer;
        }
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .flip-card-inner.flipped {
            transform: rotateY(180deg);
        }
        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 0.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .flip-card-back {
            background-color: rgba(255, 255, 255, 0.08);
            color: #A1A1AA;
            transform: rotateY(180deg);
            padding: 0.5rem;
            font-size: 0.7rem;
            line-height: 1.2;
            border: 1px solid rgba(255,255,255,0.1);
        }
    </style>
</head>
<body class="h-screen flex flex-col font-sans antialiased selection:bg-primary selection:text-white">

    <!-- TOP NAVIGATION BAR -->
    <header class="h-16 border-b border-white/5 bg-[#050505]/80 backdrop-blur-md flex items-center justify-between px-8 z-50 sticky top-0">
        <!-- Logo Section -->
        <div class="flex items-center gap-4">
            <div class="flex flex-col">
                <h1 style="
                    font-size: 36px;
                    font-weight: 900;
                    background: linear-gradient(135deg, #638C82 0%, #4A6B65 100%);
                    -webkit-background-clip: text;
                    background-clip: text;
                    -webkit-text-fill-color: transparent;
                    letter-spacing: -1px;
                    text-transform: uppercase;
                    transform: skewX(-8deg);
                    font-style: italic;
                    line-height: 1;
                    font-family: 'Inter', sans-serif;
                ">SPIKE</h1>
                <span style="
                    font-size: 8px;
                    color: #7D8590;
                    text-transform: uppercase;
                    letter-spacing: 5px;
                    font-weight: 600;
                    opacity: 0.7;
                    padding-left: 3px;
                    font-family: 'JetBrains Mono', monospace;
                ">TERMINAL</span>
            </div>
        </div>

        <!-- Ticker Tape -->
        <div class="hidden md:flex items-center gap-10">
            <div class="flex flex-col items-end group">
                <span class="text-xs text-textDim uppercase font-bold tracking-wider mb-1 group-hover:text-textMuted transition-colors">Market</span>
                <span class="text-base font-mono text-textMuted group-hover:text-white transition-colors">RELIANCE.NS</span>
            </div>
            <div class="h-10 w-px bg-white/10"></div>
            <div class="flex flex-col items-end">
                <span class="text-xs text-textDim uppercase font-bold tracking-wider mb-1">Live Price</span>
                <span id="live-price" class="text-base font-mono font-bold text-white transition-colors duration-300">₹0.00</span>
            </div>
            <div class="h-10 w-px bg-white/10"></div>
            <div class="flex flex-col items-end">
                <span class="text-xs text-textDim uppercase font-bold tracking-wider mb-1">Portfolio</span>
                <span id="live-portfolio" class="text-base font-mono font-bold text-white glow-text-green transition-all duration-300">₹50,000</span>
            </div>
            <div class="h-10 w-px bg-white/10"></div>
            <div class="flex flex-col items-end">
                <span class="text-xs text-textDim uppercase font-bold tracking-wider mb-1">P&L</span>
                <span id="live-pnl" class="text-base font-mono font-bold text-emerald-400 transition-colors duration-300">+₹0</span>
            </div>
        </div>

        <!-- System Status -->
        <div class="flex items-center gap-3 bg-white/5 border border-white/5 px-4 py-2 rounded-full hover:bg-white/10 transition-colors">
            <div id="system-status" class="w-2.5 h-2.5 rounded-full bg-zinc-600 transition-colors duration-300 shadow-glow"></div>
            <span id="status-label" class="text-sm font-medium text-textMuted">System Idle</span>
        </div>
    </header>

    <!-- MAIN DASHBOARD CONTENT -->
    <!-- Reduced global padding (p-4 vs p-6) and gap (gap-4 vs gap-6) for tighter feel -->
    <main class="flex-1 overflow-hidden p-4 grid grid-cols-12 gap-4">
        
        <!-- LEFT COLUMN: CONTROLS & STATS (Span 3) -->
        <aside class="col-span-12 lg:col-span-3 flex flex-col gap-4 overflow-hidden h-full">
            
            <!-- Control Panel (30%) -->
            <div class="glass-panel rounded-xl p-5 flex flex-col gap-4 h-[30%] overflow-hidden">
                <div class="flex items-center gap-3 pb-2 border-b border-white/5 shrink-0">
                    <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>
                    <h2 class="text-sm font-bold text-white uppercase tracking-widest">Simulation Config</h2>
                </div>

                <div class="flex flex-col gap-4 flex-1 justify-center">
                    <div class="grid grid-cols-2 gap-3">
                        <div class="group relative">
                            <label class="block text-[10px] text-textMuted font-bold mb-1.5 uppercase tracking-wide">Start Date</label>
                            <div class="relative flex items-center">
                                <svg class="w-3.5 h-3.5 absolute left-3 text-textDim" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                <input type="date" id="start-date" value="2024-01-01" class="w-full bg-[#0F0F0F] border border-white/10 rounded-lg pl-9 pr-3 py-2 text-xs text-white font-mono focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500/50 outline-none transition-all hover:border-white/20 cursor-pointer">
                            </div>
                        </div>
                        <div class="group relative">
                            <label class="block text-[10px] text-textMuted font-bold mb-1.5 uppercase tracking-wide">End Date</label>
                            <div class="relative flex items-center">
                                <svg class="w-3.5 h-3.5 absolute left-3 text-textDim" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                <input type="date" id="end-date" value="2024-03-31" class="w-full bg-[#0F0F0F] border border-white/10 rounded-lg pl-9 pr-3 py-2 text-xs text-white font-mono focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500/50 outline-none transition-all hover:border-white/20 cursor-pointer">
                            </div>
                        </div>
                    </div>
                    
                    <div class="group relative">
                        <label class="block text-[10px] text-textMuted font-bold mb-1.5 uppercase tracking-wide">Initial Capital</label>
                        <div class="relative flex items-center">
                            <span class="absolute left-3 text-emerald-500 font-mono text-sm font-bold">₹</span>
                            <input type="number" id="capital" value="50000" class="w-full bg-[#0F0F0F] border border-white/10 rounded-lg pl-8 pr-3 py-2.5 text-sm text-white font-mono font-bold focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500/50 outline-none transition-all hover:border-white/20 shadow-inner">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mt-2">
                        <button id="start-btn" onclick="startTrading()" class="flex items-center justify-center gap-3 bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 text-white py-5 rounded-xl text-base font-bold transition-all shadow-lg hover:shadow-neon active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed group border border-emerald-500/50">
                            <svg class="w-5 h-5 fill-white group-hover:scale-110 transition-transform" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            <span class="tracking-wider">EXECUTE</span>
                        </button>
                        <button id="stop-btn" onclick="stopTrading()" disabled class="flex items-center justify-center gap-3 bg-[#1A1A1A] hover:bg-[#252525] border border-white/10 text-textMuted hover:text-white py-5 rounded-xl text-base font-bold transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed group">
                            <svg class="w-5 h-5 fill-current group-hover:text-red-500 transition-colors" viewBox="0 0 24 24"><path d="M6 6h12v12H6z"/></svg>
                            <span class="tracking-wider">HALT</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Market Stats (40%) -->
            <div class="glass-panel rounded-xl p-5 flex flex-col h-[40%]">
                <div class="flex items-center gap-3 pb-3 mb-2 border-b border-white/5 shrink-0">
                    <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                    <h2 class="text-sm font-bold text-white uppercase tracking-widest">Live Metrics</h2>
                </div>
                
                <div class="flex-1 flex flex-col gap-3 justify-center">
                    <!-- Top Row: Financials -->
                    <div class="grid grid-cols-2 gap-3 h-1/2">
                        <!-- Cash Card -->
                        <div class="flip-card">
                            <div class="flip-card-inner bg-white/[0.03] rounded-lg border border-white/5 hover:border-emerald-500/30 transition-colors" onclick="this.classList.toggle('flipped')">
                                <div class="flip-card-front p-3 flex flex-col justify-between items-start">
                                    <span class="text-[10px] font-bold text-textMuted uppercase tracking-wider">Available Cash</span>
                                    <span id="cash-balance" class="font-mono text-white text-xl font-bold tracking-tight">₹50,000</span>
                                </div>
                                <div class="flip-card-back">
                                    <span class="font-bold text-emerald-500 mb-1">LIQUIDITY</span>
                                    Total cash available to deploy for new positions.
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pos Value Card -->
                        <div class="flip-card">
                            <div class="flip-card-inner bg-white/[0.03] rounded-lg border border-white/5 hover:border-accent/30 transition-colors" onclick="this.classList.toggle('flipped')">
                                <div class="flip-card-front p-3 flex flex-col justify-between items-start">
                                    <span class="text-[10px] font-bold text-textMuted uppercase tracking-wider">Pos Value</span>
                                    <span id="position-value" class="font-mono text-white text-xl font-bold tracking-tight">₹0</span>
                                </div>
                                <div class="flip-card-back">
                                    <span class="font-bold text-accent mb-1">EXPOSURE</span>
                                    Current market value of all active holdings.
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Row: Stats -->
                    <div class="grid grid-cols-3 gap-3 h-1/2">
                        <!-- Step Card -->
                        <div class="flip-card">
                            <div class="flip-card-inner bg-white/[0.03] rounded-lg border border-white/5" onclick="this.classList.toggle('flipped')">
                                <div class="flip-card-front p-2 flex flex-col items-center justify-center">
                                    <span class="text-[9px] font-bold text-textDim uppercase tracking-wide mb-1">Step</span>
                                    <span id="current-step" class="font-mono text-white text-lg font-bold">0</span>
                                </div>
                                <div class="flip-card-back">
                                    TIME
                                </div>
                            </div>
                        </div>

                        <!-- Holdings Card -->
                        <div class="flip-card">
                            <div class="flip-card-inner bg-white/[0.03] rounded-lg border border-white/5" onclick="this.classList.toggle('flipped')">
                                <div class="flip-card-front p-2 flex flex-col items-center justify-center">
                                    <span class="text-[9px] font-bold text-textDim uppercase tracking-wide mb-1">Holdings</span>
                                    <span id="shares-held" class="font-mono text-white text-lg font-bold">0</span>
                                </div>
                                <div class="flip-card-back">
                                    SHARES
                                </div>
                            </div>
                        </div>

                        <!-- Trades Card -->
                        <div class="flip-card">
                            <div class="flip-card-inner bg-white/[0.03] rounded-lg border border-white/5" onclick="this.classList.toggle('flipped')">
                                <div class="flip-card-front p-2 flex flex-col items-center justify-center">
                                    <span class="text-[9px] font-bold text-textDim uppercase tracking-wide mb-1">Trades</span>
                                    <span id="total-trades" class="font-mono text-accent text-lg font-black">0</span>
                                </div>
                                <div class="flip-card-back">
                                    COUNT
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-auto pt-3 border-t border-white/5 shrink-0">
                    <button onclick="exportTradesCSV()" class="w-full flex items-center justify-center gap-2 text-xs text-textMuted hover:text-white transition-colors uppercase tracking-widest font-bold py-3 hover:bg-white/5 rounded-lg group border border-transparent hover:border-white/10">
                        <svg class="w-4 h-4 group-hover:translate-y-[-2px] transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                        Export Trade Data
                    </button>
                </div>
            </div>

            <!-- Live Agent Action (30%) -->
            <div class="glass-panel rounded-xl p-5 h-[30%] flex flex-col">
                <div class="flex justify-between items-center mb-2 shrink-0">
                    <h3 class="text-sm font-bold text-white uppercase tracking-widest flex items-center gap-2">
                        <svg class="w-4 h-4 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                        Live Agent Action
                    </h3>
                </div>
                <div class="flex-grow w-full relative">
                    <canvas id="actions-chart"></canvas>
                </div>
            </div>
        </aside>

        <!-- CENTER COLUMN: VISUALIZATIONS (Span 6) -->
        <section class="col-span-12 lg:col-span-6 flex flex-col gap-4 h-full">
            
            <!-- Top Metrics Row -->
            <div class="grid grid-cols-4 gap-4">
                <!-- Portfolio Card -->
                <div class="glass-panel rounded-xl p-5 relative overflow-hidden group hover:border-emerald-500/30 transition-all duration-300">
                    <div class="absolute top-0 left-0 w-1.5 h-full bg-emerald-500 opacity-50"></div>
                    <span class="block text-xs text-textMuted uppercase font-bold tracking-wider mb-2">Net Worth</span>
                    <div id="metric-portfolio" class="text-3xl font-black text-white font-mono tracking-tight group-hover:glow-text-green transition-all">₹50,000</div>
                    <div id="metric-portfolio-change" class="text-xs font-bold mt-2 text-emerald-400 flex items-center gap-1 bg-emerald-500/10 w-fit px-2 py-1 rounded">
                        <span>+0.00%</span>
                    </div>
                </div>

                <!-- Sharpe Card -->
                <div class="glass-panel rounded-xl p-5 border-l-4 border-l-blue-500/50 hover:bg-white/[0.02] transition-colors">
                    <span class="block text-xs text-textMuted uppercase font-bold tracking-wider mb-2">Sharpe Ratio</span>
                    <div id="metric-sharpe" class="text-3xl font-black text-white font-mono tracking-tight">0.00</div>
                    <span class="text-xs text-textDim mt-2 block font-medium">Risk Adjusted</span>
                </div>

                <!-- Win Rate Card -->
                <div class="glass-panel rounded-xl p-5 border-l-4 border-l-amber-500/50 hover:bg-white/[0.02] transition-colors">
                    <span class="block text-xs text-textMuted uppercase font-bold tracking-wider mb-2">Win Rate</span>
                    <div id="metric-winrate" class="text-3xl font-black text-white font-mono tracking-tight">0.0%</div>
                    <span class="text-xs text-textDim mt-2 block font-medium">Profitability</span>
                </div>

                <!-- Drawdown Card -->
                <div class="glass-panel rounded-xl p-5 border-l-4 border-l-red-500/50 hover:bg-white/[0.02] transition-colors">
                    <span class="block text-xs text-textMuted uppercase font-bold tracking-wider mb-2">Drawdown</span>
                    <div id="metric-drawdown" class="text-3xl font-black text-white font-mono tracking-tight">0.0%</div>
                    <span class="text-xs text-textDim mt-2 block font-medium">Max Loss</span>
                </div>
            </div>

            <!-- Equity Chart (Large) -->
            <div class="glass-panel rounded-xl p-6 flex-grow relative flex flex-col min-h-[500px]">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-sm font-bold text-white uppercase tracking-widest flex items-center gap-3">
                        <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                        Equity Curve
                    </h3>
                    <div class="flex gap-2 items-center bg-white/5 px-3 py-1 rounded-full border border-white/5">
                        <span class="w-2 h-2 rounded-full border border-emerald-500/50 bg-emerald-500/20"></span>
                        <span class="text-xs text-textMuted font-bold uppercase">Real-time</span>
                    </div>
                </div>
                <div class="flex-grow w-full relative">
                    <canvas id="equity-chart"></canvas>
                </div>
            </div>

        </section>

                <!-- RIGHT COLUMN: ACTIVITY & AI (Span 3) -->

                <aside class="col-span-12 lg:col-span-3 flex flex-col gap-4 h-full overflow-hidden">

                    

            <!-- Activity Log -->
            <div class="glass-panel rounded-xl flex-none flex flex-col overflow-hidden h-[45%]">
                <div class="p-5 border-b border-white/5 flex items-center gap-3 bg-[#0A0A0A]/50 shrink-0">
                    <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                    <h3 class="text-sm font-bold text-white uppercase tracking-widest flex-1">Activity Log</h3>
                    <span id="activity-count" class="bg-white/10 text-white text-xs px-2.5 py-0.5 rounded font-mono font-bold">0</span>
                </div>
                <div id="activity-feed" class="flex-grow overflow-y-auto p-4 space-y-3 scrollbar-thin scrollbar-thumb-white/10 hover:scrollbar-thumb-white/20">
                    <!-- Dynamic Content -->
                    <div class="text-center text-textDim text-sm py-8 italic">
                        Ready to trade...
                    </div>
                </div>
            </div>

        

                                <!-- AI Confidence -->

        

                                <div class="glass-panel rounded-xl p-5 flex flex-col h-[27.5%]">

        

                                    <div class="flex items-center gap-3 pb-4 border-b border-white/5 mb-2 shrink-0">

        

                                        <svg class="w-5 h-5 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>

        

                                        <h2 class="text-sm font-bold text-white uppercase tracking-widest">AI Confidence</h2>

        

                                    </div>

        

                    

        

                                    <div class="space-y-4 flex-1 overflow-y-auto pr-1 flex flex-col justify-center">

        

                                        <!-- Buy -->

        

                                        <div>

        

                                            <div class="flex justify-between items-end mb-1.5">

        

                                                <span class="text-xs font-bold text-emerald-500 uppercase tracking-wide">BUY</span>

        

                                                <span id="conf-buy-val" class="text-base font-mono text-white font-bold">0.0%</span>

        

                                            </div>

        

                                            <div class="h-3 w-full bg-white/5 rounded-full overflow-hidden">

        

                                                <div id="conf-buy" class="h-full bg-emerald-500 rounded-full w-0 transition-all duration-300 shadow-[0_0_15px_rgba(16,185,129,0.4)]"></div>

        

                                            </div>

        

                                        </div>

        

                                        <!-- Hold -->

        

                                        <div>

        

                                            <div class="flex justify-between items-end mb-1.5">

        

                                                <span class="text-xs font-bold text-amber-500 uppercase tracking-wide">HOLD</span>

        

                                                <span id="conf-hold-val" class="text-base font-mono text-white font-bold">0.0%</span>

        

                                            </div>

        

                                            <div class="h-3 w-full bg-white/5 rounded-full overflow-hidden">

        

                                                <div id="conf-hold" class="h-full bg-amber-500 rounded-full w-0 transition-all duration-300 shadow-[0_0_15px_rgba(245,158,11,0.4)]"></div>

        

                                            </div>

        

                                        </div>

        

                                        <!-- Sell -->

        

                                        <div>

        

                                            <div class="flex justify-between items-end mb-1.5">

        

                                                <span class="text-xs font-bold text-red-500 uppercase tracking-wide">SELL</span>

        

                                                <span id="conf-sell-val" class="text-base font-mono text-white font-bold">0.0%</span>

        

                                            </div>

        

                                            <div class="h-3 w-full bg-white/5 rounded-full overflow-hidden">

        

                                                <div id="conf-sell" class="h-full bg-red-500 rounded-full w-0 transition-all duration-300 shadow-[0_0_15px_rgba(239,68,68,0.4)]"></div>

        

                                            </div>

        

                                        </div>

        

                                    </div>

        

                                </div>

        

                    

        

                                            <!-- Position Detail (27.5%) -->

        

                    

        

                                            <div class="glass-panel rounded-xl p-5 h-[27.5%] flex flex-col">

        

                    

        

                                                <div class="flex justify-between items-center mb-4 shrink-0">

        

                    

        

                                                     <div class="flex items-center gap-3">

        

                    

        

                                                        <svg class="w-5 h-5 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>

        

                    

        

                                                        <h3 class="text-sm font-bold text-white uppercase tracking-widest">Active Position</h3>

        

                    

        

                                                     </div>

        

                    

        

                                                     <span id="pos-stock" class="text-xs font-mono text-textMuted bg-white/5 px-2.5 py-1 rounded border border-white/5 font-bold">RELIANCE.NS</span>

        

                    

        

                                                </div>

        

                                    

        

                                    <div class="grid grid-cols-2 gap-y-4 gap-x-4 flex-1 content-center">

        

                                        <div>

        

                                            <div class="text-[10px] text-textMuted font-bold uppercase tracking-wide mb-1">Avg Price</div>

        

                                            <div id="pos-avgcost" class="text-base font-mono text-white font-bold">₹0.00</div>

        

                                        </div>

        

                                        <div class="text-right">

        

                                            <div class="text-[10px] text-textMuted font-bold uppercase tracking-wide mb-1">Current</div>

        

                                            <div id="pos-price" class="text-2xl font-mono text-white font-black tracking-tight">₹0.00</div>

        

                                        </div>

        

                                        <div class="col-span-2 border-t border-white/5 pt-3 flex justify-between items-end">

        

                                            <div>

        

                                                <div class="text-[10px] text-textMuted font-bold uppercase tracking-wide mb-1">Unrealized P&L</div>

        

                                                <div id="pos-unrealized" class="text-2xl font-mono font-black text-emerald-400 tracking-tight">₹0.00</div>

        

                                            </div>

        

                                            <div class="text-right">

        

                                                 <div class="text-[10px] text-textMuted font-bold uppercase tracking-wide mb-1">Realized</div>

        

                                                 <div id="pos-realized" class="text-sm font-mono text-emerald-400 font-bold">₹0.00</div>

        

                                            </div>

        

                                        </div>

        

                                         <!-- Added visible inventory for completeness -->

        

                                        <div class="col-span-2 border-t border-white/5 pt-3 flex justify-between items-center">

        

                                             <div class="text-[10px] text-textMuted font-bold uppercase tracking-wide">Inventory</div>

        

                                             <div id="pos-inventory" class="text-base font-mono text-white font-bold">0</div>

        

                                        </div>

        

                                    </div>

        

                                </div>

                </aside>

    </main>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="hidden fixed inset-0 bg-[#050505]/90 backdrop-blur-sm flex flex-col items-center justify-center z-[100] transition-opacity duration-300">
        <div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-800 h-16 w-16 mb-6"></div>
        <h2 class="text-2xl font-bold text-white tracking-widest mb-3">INITIALIZING</h2>
        <p class="text-emerald-500 font-mono text-base animate-pulse spinner-text">Loading Neural Weights...</p>
    </div>

    <!-- Import Logic -->
    <script src="/static/js/premium_ultimate.js"></script>
</body>
</html>
